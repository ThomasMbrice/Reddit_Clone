{"ast":null,"code":"var _jsxFileName = \"/Users/thomasmbrice/Desktop/coding/cse316/gamer/project-predditstoriesyoutubeshorts/client/src/components/utils/comment.js\",\n  _s = $RefreshSig$();\n// components/Comment.js\nimport { useEffect, useState } from 'react';\nimport Time from './Time';\nimport * as api from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Comment = ({\n  comment,\n  onReply,\n  level = 0,\n  isGuest,\n  authState\n}) => {\n  _s();\n  const [commentVoteData, setCommentVoteData] = useState({\n    votes: 0,\n    votedBy: []\n  });\n  useEffect(() => {\n    if (comment) {\n      setCommentVoteData({\n        votes: comment.votes || 0,\n        votedBy: comment.votedBy || []\n      });\n    }\n  }, [comment]);\n  if (!comment) return null;\n  const indent = level * 20;\n  const handleVote = async isUpvote => {\n    if ((authState === null || authState === void 0 ? void 0 : authState.type) === 'guest' || !(authState !== null && authState !== void 0 && authState.user)) {\n      alert('Please log in to vote');\n      return;\n    }\n    const user = authState.user.user;\n    if (user.reputation < 50) {\n      alert('You need at least 50 reputation to vote');\n      return;\n    }\n    if (comment.commentedBy === user.displayName) {\n      alert('You cannot vote on your own comment');\n      return;\n    }\n    try {\n      const voteFunction = isUpvote ? api.upvoteComment : api.downvoteComment;\n      const response = await voteFunction(comment.commentID, user.displayName);\n      setCommentVoteData({\n        votes: response.data.votes,\n        votedBy: response.data.votedBy\n      });\n    } catch (error) {\n      var _error$response, _error$response$data;\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error voting on comment');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginLeft: `${indent}px`,\n      borderLeft: '1px solid #ccc',\n      paddingLeft: '10px'\n    },\n    className: \"mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 text-sm text-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-medium\",\n        children: comment.commentedBy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" | \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(Time, {\n          date: comment.commentedDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" | \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vote-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleVote(true),\n          disabled: (authState === null || authState === void 0 ? void 0 : authState.type) === 'guest',\n          style: {\n            opacity: (authState === null || authState === void 0 ? void 0 : authState.type) === 'guest' ? 0.5 : 1\n          },\n          children: \"\\u25B2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: commentVoteData.votes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleVote(false),\n          disabled: (authState === null || authState === void 0 ? void 0 : authState.type) === 'guest',\n          style: {\n            opacity: (authState === null || authState === void 0 ? void 0 : authState.type) === 'guest' ? 0.5 : 1\n          },\n          children: \"\\u25BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"my-2\",\n      children: comment.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), !isGuest && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onReply(comment._id),\n      className: \"text-sm text-blue-600 hover:text-blue-800\",\n      children: \"Reply\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this), Array.isArray(comment.commentIDs) && comment.commentIDs.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: comment.commentIDs.map(reply => /*#__PURE__*/_jsxDEV(Comment, {\n        comment: reply,\n        onReply: onReply,\n        level: level + 1,\n        isGuest: isGuest,\n        authState: authState\n      }, `comment-${reply._id || reply}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(Comment, \"bw2a4JFpIeqDQ/jDX+TzQnzSjXs=\");\n_c = Comment;\nexport default Comment;\nvar _c;\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["useEffect","useState","Time","api","jsxDEV","_jsxDEV","Comment","comment","onReply","level","isGuest","authState","_s","commentVoteData","setCommentVoteData","votes","votedBy","indent","handleVote","isUpvote","type","user","alert","reputation","commentedBy","displayName","voteFunction","upvoteComment","downvoteComment","response","commentID","data","error","_error$response","_error$response$data","message","style","marginLeft","borderLeft","paddingLeft","className","children","fileName","_jsxFileName","lineNumber","columnNumber","date","commentedDate","onClick","disabled","opacity","content","_id","Array","isArray","commentIDs","length","map","reply","_c","$RefreshReg$"],"sources":["/Users/thomasmbrice/Desktop/coding/cse316/gamer/project-predditstoriesyoutubeshorts/client/src/components/utils/comment.js"],"sourcesContent":["// components/Comment.js\nimport { useEffect, useState } from 'react';\nimport Time from './Time';\nimport * as api from '../../api';\n\nconst Comment = ({ comment, onReply, level = 0, isGuest, authState }) => {\n    const [commentVoteData, setCommentVoteData] = useState({\n        votes: 0,\n        votedBy: []\n    });\n\n    useEffect(() => {\n        if (comment) {\n            setCommentVoteData({\n                votes: comment.votes || 0,\n                votedBy: comment.votedBy || []\n            });\n        }\n    }, [comment]);\n\n    if (!comment) return null;\n\n    const indent = level * 20;\n\n    const handleVote = async (isUpvote) => {\n        if (authState?.type === 'guest' || !authState?.user) {\n            alert('Please log in to vote');\n            return;\n        }\n    \n        const user = authState.user.user;\n        \n        if (user.reputation < 50) {\n            alert('You need at least 50 reputation to vote');\n            return;\n        }\n    \n        if (comment.commentedBy === user.displayName) {\n            alert('You cannot vote on your own comment');\n            return;\n        }\n    \n        try {\n            const voteFunction = isUpvote ? api.upvoteComment : api.downvoteComment;\n            const response = await voteFunction(comment.commentID, user.displayName);\n            setCommentVoteData({\n                votes: response.data.votes,\n                votedBy: response.data.votedBy\n            });\n        } catch (error) {\n            alert(error.response?.data?.message || 'Error voting on comment');\n        }\n    };\n\n    return (\n        <div style={{ marginLeft: `${indent}px`, borderLeft: '1px solid #ccc', paddingLeft: '10px' }} className=\"mb-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                <span className=\"font-medium\">{comment.commentedBy}</span>\n                <span> | </span>\n                <span><Time date={comment.commentedDate}/></span>\n                <span> | </span>\n                \n                <div className=\"vote-controls\">\n                    <button\n                        onClick={() => handleVote(true)}\n                        disabled={authState?.type === 'guest'}\n                        style={{opacity: authState?.type === 'guest' ? 0.5 : 1}}\n                    >\n                        ▲\n                    </button>\n                    <span>{commentVoteData.votes}</span>\n                    <button\n                        onClick={() => handleVote(false)}\n                        disabled={authState?.type === 'guest'}\n                        style={{opacity: authState?.type === 'guest' ? 0.5 : 1}}\n                    >\n                        ▼\n                    </button>\n                </div>\n            </div>\n            <p className=\"my-2\">{comment.content}</p>\n            {!isGuest && (\n                <button \n                    onClick={() => onReply(comment._id)}\n                    className=\"text-sm text-blue-600 hover:text-blue-800\"\n                >\n                    Reply\n                </button>\n            )}\n\n            {Array.isArray(comment.commentIDs) && comment.commentIDs.length > 0 && (\n                <div className=\"mt-4\">\n                    {comment.commentIDs.map(reply => (\n                        <Comment \n                            key={`comment-${reply._id || reply}`}\n                            comment={reply}\n                            onReply={onReply}\n                            level={level + 1}\n                            isGuest={isGuest}\n                            authState={authState}\n                        />\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Comment;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}